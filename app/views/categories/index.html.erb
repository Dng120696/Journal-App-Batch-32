<div class = 'text-left w-full'>
<%= link_to 'Task Today', tasks_today_path,class: ' bg-gray-800 text-gray-50 font-bold py-2 px-6 rounded-md'%>

  <div class = 'flex items-center justify-between mb-4'>
      <h1 class = ' text-3xl font-bold my-4'> Categories</h1>

      <%= link_to 'Add Category', new_category_path, class: ' bg-gray-800 text-gray-50 font-bold py-2 px-6 rounded-md'%>
  </div>
  <ul class = 'grid grid-cols-2 gap-6 mb-10'>
      <% @categories.order(:id).each do |category| %>

        <li class = 'shadow-[0_0_1rem_rgba(0,0,0,0.15)] p-8 text-xl font-bold rounded-md min-h-[20vh]  flex flex-col justify-between'>
        <span class = 'flex items-center justify-between mb-2'>
        <%= link_to category.name, category_path(category)%>
        <%= link_to "New Task", new_category_task_path(category) ,class: ' bg-gray-100 text-gray-600 text-sm font-semibold py-2 px-4 rounded-md hover:bg-gray-200' %>
        </span>
        <span class = 'font-normal text-sm  '>
         <% if category.tasks.any? %>
        <ul>
          <% category.tasks.order(:id).each do |task| %>
            <div class = 'grid grid-cols-3 items-center border-b-[1px] border-b-gray-200 pb-2'>
            <div class = 'flex items-center gap-2'>
            <%= form_with model: [category, task], method: :patch do |f| %>
              <div class = 'flex items-center'>
              <%= f.check_box :is_completed, onchange: "this.form.submit()",class: 'w-5 h-5 ' %>
              <%= f.submit '' %>
            </div>
            <% end %>
            <li class="  <%= task.is_completed ? 'line-through text-gray-400' : '' %>"><%= link_to task.title, category_task_path(category, task)%></li>

            </div>

            <li class="flex items-center justify-center <%= task.is_completed ? 'line-through text-gray-400' : '' %>">
            <%= task.due_date.strftime("%B %d, %Y ") %>
          </li>
            <div class = 'flex items-center justify-end gap-4 text-gray-400'>
            <li class = 'text-[1rem]'><%= link_to raw('<i class="fa-solid fa-pen"></i>'), edit_category_task_path(category, task) %></li>
            <li class = 'text-[1rem]'><%= link_to raw('<i class="fa-solid fa-trash-can"></i>'), category_task_path(category,task),data: {turbo_confirm:  'Are you sure you want to delete this task?' , turbo_method: :delete }%></li>
            </div>
            </div>

          <% end %>

        </ul>
      <% else %>
        <p class = ' text-gray-400 font-light border-b-[1px] pb-2'>No tasks for this category.</p>
       <% end %>
        </span>
        <div class = 'flex items-center justify-between mt-2 '>
        <%= button_to "Delete Category", category_path(category), method: :delete, data: { turbo_confirm: "Are you sure?" },class: "text-sm font-semibold text-gray-500  hover:text-gray-800 hover:underline flex items-center text-center" %>
        <div class = 'flex items-center justify-center  gap-4'>
          <%= link_to 'View All Tasks', category_tasks_path(category), class: "text-sm font-semibold text-gray-500  hover:text-gray-800 hover:underline  flex items-center text-center"%>
          <%= button_to "Delete All Tasks", delete_all_tasks_category_path(category), method: :delete, data: { turbo_confirm: "Are you sure?" }, class: "text-sm font-semibold text-gray-500 hover:text-gray-800 hover:underline  flex items-center text-center"%>
        </div>

        </div>

        </li>

      <%end%>


   </ul>



</div>
